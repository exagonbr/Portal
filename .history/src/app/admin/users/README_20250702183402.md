# P√°gina de Gerenciamento de Usu√°rios

## üöÄ Configura√ß√£o R√°pida

### 1. Configurar Vari√°veis de Ambiente

Crie um arquivo `.env.local` na raiz do projeto:

```bash
# Copie o arquivo de exemplo
cp .env.local.example .env.local

# Edite o arquivo com a URL do seu backend
NEXT_PUBLIC_API_URL=http://localhost:3001/api
```

### 2. Verificar Backend

Certifique-se de que o backend est√° rodando:

```bash
# Na pasta do backend
npm run dev
# ou
yarn dev
```

### 3. Testar Conex√£o

Acesse a p√°gina de teste: `/admin/users/test`

## üìä Diagn√≥stico de Problemas de Conex√£o

### 1. Verificar se o Backend est√° Rodando

O frontend espera que o backend esteja dispon√≠vel em:
- **Desenvolvimento**: `http://localhost:3001/api`
- **Produ√ß√£o**: URL configurada em `NEXT_PUBLIC_API_URL`

### 2. Logs de Debug

A p√°gina inclui logs detalhados no console do navegador (F12):
- üîå **Verifica√ß√£o de conex√£o** - Status da conex√£o com o backend
- üîç **Par√¢metros de busca** - Dados enviados para a API
- ‚úÖ **Respostas bem-sucedidas** - Dados recebidos da API
- ‚ùå **Erros detalhados** - Mensagens de erro espec√≠ficas
- üìä **Estat√≠sticas** - Resumo dos dados processados

### 3. Indicadores Visuais

A p√°gina mostra o status da conex√£o no topo:
- **üü° Conectando...** - Verificando conex√£o com o backend
- **üü¢ Online** - Backend conectado e funcionando
- **üî¥ Offline** - Erro de conex√£o com o backend

### 4. Estrutura Esperada da API

#### Request
```
GET /api/user?page=1&limit=10&sortBy=name&sortOrder=asc
```

#### Response
```json
{
  "success": true,
  "data": {
    "items": [
      {
        "id": "uuid",
        "name": "Nome do Usu√°rio",
        "email": "usuario@email.com",
        "role_id": "uuid",
        "role_name": "Administrador",
        "institution_id": "uuid",
        "institution_name": "Institui√ß√£o XYZ",
        "is_active": true,
        "created_at": "2024-01-01T00:00:00Z",
        "updated_at": "2024-01-01T00:00:00Z",
        "endereco": "Rua Exemplo, 123",
        "telefone": "(11) 99999-9999"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 100,
      "totalPages": 10,
      "hasNext": true,
      "hasPrev": false
    }
  }
}
```

### 5. Solu√ß√£o de Problemas Comuns

#### ‚ùå "N√£o foi poss√≠vel conectar ao servidor"
1. **Verifique se o backend est√° rodando**
   ```bash
   # No terminal do backend
   npm run dev
   ```

2. **Confirme a porta do backend**
   - Padr√£o: 3001
   - Verifique no console do backend

3. **Configure o .env.local**
   ```
   NEXT_PUBLIC_API_URL=http://localhost:3001/api
   ```

4. **Verifique CORS no backend**
   - O backend deve permitir requisi√ß√µes do frontend

#### ‚ùå "A resposta da API n√£o cont√©m dados v√°lidos"
1. **Teste o endpoint diretamente**
   ```bash
   curl http://localhost:3001/api/user
   ```

2. **Verifique a estrutura da resposta**
   - Deve conter `items` (array)
   - Deve conter `pagination` (objeto)

3. **Verifique autentica√ß√£o**
   - Token JWT v√°lido
   - Permiss√µes adequadas

#### ‚ùå "Dados n√£o aparecem no grid"
1. **Abra o Console do Navegador (F12)**
2. **Procure por logs com emojis**
3. **Verifique a aba Network**
   - Status da requisi√ß√£o
   - Resposta da API
4. **Verifique filtros ativos**
   - Limpe todos os filtros
   - Tente buscar sem filtros

### 6. Ferramentas de Debug

#### P√°gina de Teste de Conex√£o
Acesse `/admin/users/test` para:
- Testar conex√£o com o backend
- Ver detalhes da resposta
- Identificar problemas de configura√ß√£o

#### Console do Navegador
Todos os logs importantes s√£o prefixados com emojis:
- üîå Conex√£o
- üîç Busca
- ‚úÖ Sucesso
- ‚ùå Erro
- üìä Estat√≠sticas
- ‚ö†Ô∏è Avisos

### 7. Modo de Desenvolvimento

Se o backend n√£o estiver dispon√≠vel:
1. O sistema detecta o erro
2. Mostra indicador "Offline"
3. Ap√≥s alguns segundos, tenta usar dados simulados
4. Permite desenvolvimento do frontend sem backend

### 8. Checklist de Verifica√ß√£o

- [ ] Backend est√° rodando
- [ ] `.env.local` configurado
- [ ] URL da API correta
- [ ] CORS habilitado no backend
- [ ] Token de autentica√ß√£o v√°lido
- [ ] Estrutura da resposta correta
- [ ] Console sem erros cr√≠ticos